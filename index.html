<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book &amp; Notes Vault</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=DM+Mono:ital,wght@0,300;0,400;1,300&family=DM+Sans:ital,wght@0,300;0,400;0,600;1,300&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles/main.css" />
</head>
<body>

  <!-- Skip navigation -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <header class="site-header" role="banner">
    <div class="header-inner">
      <div class="logo">
        <span class="logo-icon" aria-hidden="true">ðŸ“š</span>
        <span class="logo-text">Book<em>&amp;</em>Notes<br/><small>Vault</small></span>
      </div>
      <nav class="main-nav" role="navigation" aria-label="Main navigation">
        <ul role="list">
          <li><a href="#section-dashboard" class="nav-link" data-section="dashboard">Dashboard</a></li>
          <li><a href="#section-catalog" class="nav-link" data-section="catalog">Catalog</a></li>
          <li><a href="#section-add" class="nav-link" data-section="add">Add Book</a></li>
          <li><a href="#section-settings" class="nav-link" data-section="settings">Settings</a></li>
          <li><a href="#section-about" class="nav-link" data-section="about">About</a></li>
        </ul>
      </nav>
      <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode" aria-pressed="false">
        <span class="theme-icon" aria-hidden="true">â˜¾</span>
      </button>
    </div>
  </header>

  <main id="main-content" role="main">

    <!-- â”€â”€ DASHBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <section id="section-dashboard" class="page-section active" aria-labelledby="h-dashboard">
      <div class="section-inner">
        <h1 id="h-dashboard" class="section-title">Dashboard</h1>

        <div class="stats-grid" role="region" aria-label="Reading statistics">
          <article class="stat-card" aria-label="Total books">
            <span class="stat-value" id="stat-total">0</span>
            <span class="stat-label">Books in Vault</span>
          </article>
          <article class="stat-card" aria-label="Total pages">
            <span class="stat-value" id="stat-pages">0</span>
            <span class="stat-label">Total Pages</span>
          </article>
          <article class="stat-card" aria-label="Top tag">
            <span class="stat-value" id="stat-top-tag">â€”</span>
            <span class="stat-label">Top Tag</span>
          </article>
          <article class="stat-card" aria-label="Average pages per book">
            <span class="stat-value" id="stat-avg">0</span>
            <span class="stat-label">Avg Pages</span>
          </article>
        </div>

        <!-- Page cap / target -->
        <div class="cap-container" role="region" aria-label="Reading target">
          <div class="cap-header">
            <h2 class="subsection-title">Reading Target</h2>
            <span class="cap-value-display">
              <span id="cap-current">0</span> / <span id="cap-target-display">1000</span> pages
            </span>
          </div>
          <div class="progress-bar-wrap" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Pages progress">
            <div class="progress-bar-fill" id="progress-fill"></div>
          </div>
          <p id="cap-status-msg" role="status" aria-live="polite" aria-atomic="true" class="cap-status"></p>
        </div>

        <!-- Last 7 days chart -->
        <div class="chart-container" role="region" aria-label="Books added in last 7 days">
          <h2 class="subsection-title">Last 7 Days</h2>
          <div class="bar-chart" id="week-chart" aria-label="Bar chart of books added per day"></div>
        </div>

        <!-- Tag breakdown -->
        <div class="tag-breakdown" role="region" aria-label="Books by tag">
          <h2 class="subsection-title">By Tag</h2>
          <div class="tag-bars" id="tag-bars"></div>
        </div>
      </div>
    </section>

    <!-- â”€â”€ CATALOG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <section id="section-catalog" class="page-section" aria-labelledby="h-catalog">
      <div class="section-inner">
        <h1 id="h-catalog" class="section-title">Catalog</h1>

        <div class="catalog-controls">
          <!-- Search -->
          <div class="search-wrap">
            <label for="search-input" class="sr-only">Search books by regex pattern</label>
            <input
              type="search"
              id="search-input"
              class="search-input"
              placeholder="Searchâ€¦ (regex supported)"
              autocomplete="off"
              spellcheck="false"
              aria-describedby="search-hint"
            />
            <span class="search-icon" aria-hidden="true">âŒ•</span>
            <label class="toggle-label" style="margin-left:8px">
              <input type="checkbox" id="search-case" aria-label="Case sensitive search" />
              <span>Aa</span>
            </label>
          </div>
          <p id="search-hint" class="hint-text">Enter text or a regular expression. Invalid patterns are ignored.</p>
          <p id="search-error" class="field-error" role="alert" aria-live="assertive"></p>

          <!-- Sort -->
          <div class="sort-wrap">
            <label for="sort-select" class="sr-only">Sort by</label>
            <select id="sort-select" class="sort-select" aria-label="Sort records">
              <option value="date-desc">Date â†“</option>
              <option value="date-asc">Date â†‘</option>
              <option value="title-asc">Title Aâ†’Z</option>
              <option value="title-desc">Title Zâ†’A</option>
              <option value="pages-desc">Pages â†“</option>
              <option value="pages-asc">Pages â†‘</option>
            </select>
          </div>

          <!-- Filter by tag -->
          <div class="filter-wrap">
            <label for="tag-filter" class="sr-only">Filter by tag</label>
            <select id="tag-filter" class="sort-select" aria-label="Filter by tag">
              <option value="">All Tags</option>
            </select>
          </div>

          <!-- Import/Export -->
          <div class="io-wrap">
            <button id="btn-export" class="btn btn-secondary">Export JSON</button>
            <label class="btn btn-secondary" for="import-file">
              Import JSON
              <input type="file" id="import-file" accept=".json" class="sr-only" aria-label="Import JSON file" />
            </label>
            <button id="btn-export-csv" class="btn btn-secondary">Export CSV</button>
          </div>
        </div>

        <p id="record-count" class="record-count" aria-live="polite" aria-atomic="true"></p>

        <!-- Table (desktop) -->
        <div class="table-wrap" role="region" aria-label="Book catalog table" tabindex="0">
          <table id="catalog-table" aria-describedby="record-count">
            <thead>
              <tr>
                <th scope="col">Title / Author</th>
                <th scope="col">Pages</th>
                <th scope="col">Tag</th>
                <th scope="col">Date Added</th>
                <th scope="col">Actions</th>
              </tr>
            </thead>
            <tbody id="catalog-tbody">
              <!-- rows injected by JS -->
            </tbody>
          </table>
        </div>

        <p id="empty-state" class="empty-state" hidden>
          No books match your search. Try a different pattern or <button class="link-btn" id="btn-clear-search">clear search</button>.
        </p>

        <!-- Status announcer -->
        <p id="action-status" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></p>
      </div>
    </section>

    <!-- â”€â”€ ADD / EDIT FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <section id="section-add" class="page-section" aria-labelledby="h-add">
      <div class="section-inner">
        <h1 id="h-add" class="section-title">Add a Book</h1>

        <form id="book-form" class="book-form" novalidate aria-label="Book entry form">
          <input type="hidden" id="edit-id" />

          <div class="form-row">
            <div class="field-group">
              <label for="f-title" class="field-label">Title <span aria-hidden="true">*</span></label>
              <input type="text" id="f-title" class="field-input" required
                aria-required="true"
                aria-describedby="f-title-err"
                autocomplete="off"
                placeholder="The Name of the Wind" />
              <span id="f-title-err" class="field-error" role="alert" aria-live="assertive"></span>
            </div>
            <div class="field-group">
              <label for="f-author" class="field-label">Author <span aria-hidden="true">*</span></label>
              <input type="text" id="f-author" class="field-input" required
                aria-required="true"
                aria-describedby="f-author-err"
                autocomplete="off"
                placeholder="Patrick Rothfuss" />
              <span id="f-author-err" class="field-error" role="alert" aria-live="assertive"></span>
            </div>
          </div>

          <div class="form-row">
            <div class="field-group">
              <label for="f-pages" class="field-label">Pages <span aria-hidden="true">*</span></label>
              <input type="text" id="f-pages" class="field-input" required
                aria-required="true"
                aria-describedby="f-pages-err"
                inputmode="numeric"
                placeholder="662" />
              <span id="f-pages-err" class="field-error" role="alert" aria-live="assertive"></span>
            </div>
            <div class="field-group">
              <label for="f-tag" class="field-label">Tag <span aria-hidden="true">*</span></label>
              <input type="text" id="f-tag" class="field-input" required
                aria-required="true"
                aria-describedby="f-tag-err"
                placeholder="Fantasy" />
              <datalist id="tag-suggestions"></datalist>
              <span id="f-tag-err" class="field-error" role="alert" aria-live="assertive"></span>
            </div>
          </div>

          <div class="form-row">
            <div class="field-group">
              <label for="f-date" class="field-label">Date Added <span aria-hidden="true">*</span></label>
              <input type="text" id="f-date" class="field-input" required
                aria-required="true"
                aria-describedby="f-date-err f-date-hint"
                placeholder="YYYY-MM-DD" />
              <span id="f-date-hint" class="hint-text">Format: YYYY-MM-DD</span>
              <span id="f-date-err" class="field-error" role="alert" aria-live="assertive"></span>
            </div>
            <div class="field-group">
              <label for="f-isbn" class="field-label">ISBN (optional)</label>
              <input type="text" id="f-isbn" class="field-input"
                aria-describedby="f-isbn-err"
                placeholder="978-0-06-112008-4" />
              <span id="f-isbn-err" class="field-error" role="alert" aria-live="assertive"></span>
            </div>
          </div>

          <div class="form-row">
            <div class="field-group field-group--full">
              <label for="f-notes" class="field-label">Notes</label>
              <textarea id="f-notes" class="field-input field-textarea"
                aria-describedby="f-notes-err"
                rows="3"
                placeholder="Your thoughtsâ€¦"></textarea>
              <span id="f-notes-err" class="field-error" role="alert" aria-live="assertive"></span>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" id="btn-submit" class="btn btn-primary">Add to Vault</button>
            <button type="button" id="btn-cancel-edit" class="btn btn-secondary" hidden>Cancel Edit</button>
            <button type="reset" class="btn btn-ghost">Clear</button>
          </div>
        </form>

        <p id="form-status" role="status" aria-live="polite" aria-atomic="true" class="form-status-msg"></p>
      </div>
    </section>

    <!-- â”€â”€ SETTINGS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <section id="section-settings" class="page-section" aria-labelledby="h-settings">
      <div class="section-inner">
        <h1 id="h-settings" class="section-title">Settings</h1>

        <div class="settings-grid">
          <div class="settings-card">
            <h2 class="subsection-title">Reading Target</h2>
            <div class="field-group">
              <label for="s-page-cap" class="field-label">Page target (total pages goal)</label>
              <input type="number" id="s-page-cap" class="field-input" min="1" value="1000" aria-describedby="s-page-cap-hint" />
              <span id="s-page-cap-hint" class="hint-text">The dashboard will track progress toward this number.</span>
            </div>
            <button id="btn-save-cap" class="btn btn-primary">Save Target</button>
          </div>

          <div class="settings-card">
            <h2 class="subsection-title">Page Units</h2>
            <div class="field-group">
              <label for="s-unit" class="field-label">Display unit</label>
              <select id="s-unit" class="field-input" aria-describedby="s-unit-hint">
                <option value="pages">Pages</option>
                <option value="chapters">Chapters (Ã· 20)</option>
                <option value="percent">Percent of target</option>
              </select>
              <span id="s-unit-hint" class="hint-text">Changes how pages appear in stats. Chapters = pages Ã· 20.</span>
            </div>
            <button id="btn-save-unit" class="btn btn-primary">Save Unit</button>
          </div>

          <div class="settings-card settings-card--danger">
            <h2 class="subsection-title">Danger Zone</h2>
            <p>This will permanently delete all books from your vault.</p>
            <button id="btn-clear-all" class="btn btn-danger">Clear All Data</button>
          </div>
        </div>
      </div>
    </section>

    <!-- â”€â”€ ABOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <section id="section-about" class="page-section" aria-labelledby="h-about">
      <div class="section-inner about-inner">
        <h1 id="h-about" class="section-title">About</h1>
        <div class="about-card">
          <p class="about-lead">
            <strong>Book &amp; Notes Vault</strong> is a personal reading tracker that lives entirely in your browser.
            No accounts, no servers â€” your data stays with you via <code>localStorage</code>.
          </p>
          <h2 class="subsection-title">Features</h2>
          <ul>
            <li>Add, edit, and delete books with full metadata</li>
            <li>Live regex-powered search with match highlighting</li>
            <li>Sort by title, pages, or date</li>
            <li>Dashboard with reading stats, tag breakdowns, and 7-day activity chart</li>
            <li>JSON import/export with schema validation</li>
            <li>Light / Dark theme toggle (persisted)</li>
            <li>Fully keyboard-navigable; ARIA live regions for dynamic updates</li>
          </ul>
          <h2 class="subsection-title">Contact</h2>
          <p>
            Built for COMP coursework.<br />
            GitHub: <a href="https://github.com/yourusername" class="about-link" target="_blank" rel="noopener noreferrer">github.com/yourusername</a><br />
            Email: <a href="mailto:you@example.com" class="about-link">you@example.com</a>
          </p>
        </div>
      </div>
    </section>

  </main>

  <!-- Confirm dialog -->
  <div id="confirm-dialog" class="dialog-overlay" role="dialog" aria-modal="true" aria-labelledby="confirm-title" hidden>
    <div class="dialog-box">
      <h2 id="confirm-title" class="dialog-title">Confirm Delete</h2>
      <p id="confirm-msg" class="dialog-msg">Are you sure you want to delete this record? This cannot be undone.</p>
      <div class="dialog-actions">
        <button id="confirm-ok" class="btn btn-danger">Delete</button>
        <button id="confirm-cancel" class="btn btn-secondary">Cancel</button>
      </div>
    </div>
  </div>

  <footer class="site-footer" role="contentinfo">
    <p>Book &amp; Notes Vault &copy; 2025 &mdash; All data stored locally in your browser.</p>
  </footer>

  <script type="module" src="scripts/main.js"></script>
</body>
</html>
